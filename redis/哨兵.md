#描述
Redis sentinel 是一个分布式系统中监控 redis 主从服务器，并在主服务器下线时自动进行故障转移。其中三个特性：

监控（Monitoring）：    Sentinel  会不断地检查你的主服务器和从服务器是否运作正常。

提醒（Notification）： 当被监控的某个 Redis 服务器出现问题时， Sentinel 可以通过 API 向管理员或者其他应用程序发送通知。

自动故障迁移（Automatic failover）： 当一个主服务器不能正常工作时， Sentinel 会开始一次自动故障迁移操作。

#特点：

1、保证高可用

2、监控各个节点

3、自动故障迁移

#缺点：主从模式，切换需要时间丢数据

没有解决 master 写的压力



#过程
1. master下线
2. 哨兵达成master下线的共识
3. 推选一个领导哨兵
4. 领导哨兵复制故障转移
   

#选举领导哨兵
a)每个在线的哨兵节点都可以成为领导者，当它（比如哨兵3）确认主节点下线时，会向其它哨兵发is-master-down-by-addr命令，征求判断并要求将自己设置为领导者，由领导者处理故障转移；
b)当其它哨兵收到此命令时，可以同意或者拒绝它成为领导者；
c)如果哨兵3发现自己在选举的票数大于等于num(sentinels)/2+1时，将成为领导者，如果没有超过，继续选举

#故障转移过程
1. 将slave-1脱离原从节点，升级主节点。 slaveof no one

2. 将从节点slave-2指向新的主节点    slaveof new master

3. 通知客户端主节点已更换

4. 将原主节点（oldMaster）变成从节点，指向新的主节点