#进程和线程区别
"进程是分配资源的最小单位,线程是CPU调度的最小单位"

在只有进程的时候，进程间的调度是要这样的，加载进程A的上下文->cpu执行进程A->保存进程A的上下文->加载进程B的上下文
这里的进程上下文包括：
1. 用户级上下文： 正文、数据、用户堆栈以及共享存储区； 
2. 寄存器上下文： 通用寄存器、程序寄存器(IP)、处理器状态寄存器(EFLAGS)、栈指针(ESP)； 
3. 系统级上下文: 进程控制块task_struct、内存管理信息(mm_struct、vm_area_struct、pgd、pte)、内核栈

切换上下文的代价是比较大的，上下文切换后一些缓存就用不了了比如TLB。后来就搞了个线程出来，让多个线程共享一个进程的某些上下文，这样线程切换的时候就不需要，切换这些共享的上下文，减少了切换时间，增加了cpu的利用率。

线程共享了进程的：
1. 虚拟空间，包括代码，data，bss，堆
2. 自己寄存器值，线程的栈，线程ID，错误码，信号屏蔽码

一个线程崩溃了(触发SIGSEGV，且没有捕捉)，这个进程内的所有线程都崩溃了。
比如一个线程向非法地址读取或写入，无法确认这个是否会影响其他线程，只能崩溃。

#进程和线程的使用场景

线程的使用场景；
各个job需要频繁的通信或者切换，有数据需要修改，有明显的IO等待的job，比如ui等待io交互
频繁的创建和销毁job。

进程的使用场景
需要稳定的运行，确保健壮性，